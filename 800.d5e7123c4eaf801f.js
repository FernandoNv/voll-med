"use strict";(self.webpackChunkvoll_med=self.webpackChunkvoll_med||[]).push([[800],{7800:(et,x,n)=>{n.r(x),n.d(x,{DoctorsModule:()=>h});var a=n(6895),d=n(3060),C=n(7579),I=n(2722),D=n(4004),f=n(5698),g=n(3900),y=n(9300),o=n(4650),T=n(5625),$=n(1005),A=n(3151),P=n(2340),w=n(529);const Z=P.N.apiUrl;class r{constructor(t){this.httpClient=t,this.baseUrl=`${Z}/api/v1/medicos`,this.loadingSubject$=new C.x}getDoctors(){this.loadingSubject$.next(!0);const t=this.httpClient.get(this.baseUrl).pipe((0,T.X)(3),(0,D.U)(e=>e.content),(0,$.g)(500),(0,A.d)());return t.subscribe(()=>this.loadingSubject$.next(!1)),t}loading(){return this.loadingSubject$.asObservable()}newDoctor(t){return this.httpClient.post(this.baseUrl,t)}getDoctorById(t){return this.httpClient.get(`${this.baseUrl}/${t}`)}updateById(t){return this.httpClient.put(this.baseUrl,t)}deactivateAccountById(t){return this.httpClient.delete(`${this.baseUrl}/${t}`)}formatTextModal(t){return[`${t.especialidade.charAt(0)+t.especialidade.toLowerCase().slice(1)} | CRM ${t.crm}`]}}r.\u0275fac=function(t){return new(t||r)(o.LFG(w.eN))},r.\u0275prov=o.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"});var M=n(8945),S=n(1572),b=n(4859),N=n(9267);function B(i,t){1&i&&(o.TgZ(0,"div",3),o._UZ(1,"mat-spinner",4),o.qZA())}function E(i,t){if(1&i){const e=o.EpF();o.TgZ(0,"div")(1,"app-list-expansion-panel",9),o.NdJ("edit-button-clicked",function(c){o.CHM(e);const p=o.oxw(3);return o.KtG(p.onEditButtonClicked(c))})("deactivate-button-clicked",function(c){o.CHM(e);const p=o.oxw(3);return o.KtG(p.onDeactivateButtonClicked(c))}),o.qZA()()}if(2&i){const e=o.oxw().ngIf;o.xp6(1),o.Q6J("items",e)}}const Y=function(){return["/doctors/new"]};function _(i,t){if(1&i&&(o.TgZ(0,"div"),o.YNc(1,E,2,1,"div",6),o.TgZ(2,"div",7)(3,"button",8),o._uU(4," Cadastrar novo perfil "),o.qZA()()()),2&i){const e=t.ngIf;o.oxw();const s=o.MAs(4);o.xp6(1),o.Q6J("ngIf",e.length>0)("ngIfElse",s),o.xp6(2),o.Q6J("routerLink",o.DdM(3,Y))}}function J(i,t){1&i&&(o.TgZ(0,"div",10)(1,"p"),o._uU(2,"Sem m\xe9dicos cadastrados..."),o.qZA()())}function U(i,t){if(1&i&&(o.TgZ(0,"span"),o.YNc(1,_,5,4,"div",2),o.ALo(2,"async"),o.YNc(3,J,3,0,"ng-template",null,5,o.W1O),o.qZA()),2&i){const e=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,e.items$))}}class m{constructor(t,e,s){this.doctorsService=t,this.router=e,this.deactivateAccountPopupService=s,this.destroySubject$=new C.x,this.doctorsService.loading().pipe((0,I.R)(this.destroySubject$)).subscribe(c=>{this.isLoading=c})}ngOnDestroy(){this.destroySubject$.next(!0),this.destroySubject$.complete()}ngOnInit(){this.setItems()}setItems(){this.doctors$=this.doctorsService.getDoctors(),this.items$=this.doctors$.pipe((0,D.U)(t=>this.mapperToItems(t)))}mapperToItems(t){return t.map(s=>({id:s.id,title:s.nome,description:`${s.especialidade} | ${s.crm}`,content:[s.email]}))}onEditButtonClicked(t){this.router.navigate(["/doctors/edit",t])}onDeactivateButtonClicked(t){this.doctorsService.getDoctorById(t).pipe((0,f.q)(1),(0,g.w)(s=>{const c={informationName:s.nome,informationText:this.doctorsService.formatTextModal(s)};return this.deactivateAccountPopupService.open(c)})).pipe((0,y.h)(s=>!0===s),(0,g.w)(s=>this.doctorsService.deactivateAccountById(t))).subscribe({next:s=>{this.setItems()},error:s=>{console.log("Erro with the deactivation"),console.log(s),this.deactivateAccountPopupService.open()}})}}m.\u0275fac=function(t){return new(t||m)(o.Y36(r),o.Y36(d.F0),o.Y36(M.I))},m.\u0275cmp=o.Xpm({type:m,selectors:[["app-doctors"]],decls:3,vars:2,consts:[[1,"app-doctors"],["class","spinner-area",4,"ngIf"],[4,"ngIf"],[1,"spinner-area"],["diameter","40"],["noItems",""],[4,"ngIf","ngIfElse"],[1,"actions-area"],["mat-flat-button","",3,"routerLink"],[3,"items","edit-button-clicked","deactivate-button-clicked"],[1,"no-content-area"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,B,2,0,"div",1),o.YNc(2,U,5,3,"span",2),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",e.isLoading),o.xp6(1),o.Q6J("ngIf",!e.isLoading))},dependencies:[a.O5,d.rH,S.Ou,b.lW,N.e,a.Ov],styles:[".app-doctors[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){.app-doctors[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){.app-doctors[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){.app-doctors[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){.app-doctors[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){.app-doctors[_ngcontent-%COMP%]{max-width:1536px}}.app-doctors[_ngcontent-%COMP%]{height:100%}.app-doctors[_ngcontent-%COMP%]   .spinner-area[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;align-items:center;justify-content:center}.app-doctors[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]{display:flex;height:auto;flex-direction:row;justify-content:center;padding-top:3rem;padding-bottom:1.5rem}.app-doctors[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;line-height:1.5rem;font-weight:700;padding:24px!important;background-color:#0b3b60!important;color:#fff}.app-doctors[_ngcontent-%COMP%]   .no-content-area[_ngcontent-%COMP%]{padding:1rem;--tw-text-opacity: 1;color:rgb(71 85 105 / var(--tw-text-opacity))}"]});var O=n(4283);function j(i,t){if(1&i){const e=o.EpF();o.TgZ(0,"app-registration-form",2),o.NdJ("form-values-emitter",function(c){o.CHM(e);const p=o.oxw();return o.KtG(p.onSubmit(c))})("deactivate-account-emitter",function(){o.CHM(e);const c=o.oxw();return o.KtG(c.onDeactivateButtonClicked())}),o.qZA()}if(2&i){const e=t.ngIf,s=o.oxw();o.Q6J("form-options",s.buildFormOptions(e))("update",!0)}}class l{constructor(t,e,s,c,p){this.doctorsService=t,this.router=e,this.ativatedRoute=s,this.location=c,this.deactivateAccountPopupService=p,this.doctor$=this.ativatedRoute.paramMap.pipe((0,g.w)(ot=>(this.idDoctor=Number(ot.get("id")),this.doctorsService.getDoctorById(this.idDoctor))))}buildFormOptions(t){return{type:"doctor",inputValues:{nome:t.nome,crm:t.crm,email:t.email,especialidade:t.especialidade,telefone:t.telefone??"",logradouro:t.endereco?.logradouro??"",numero:t.endereco?.numero??"",uf:t.endereco?.uf??"",complemento:t.endereco?.complemento??"",cidade:t.endereco?.cidade??"",cep:t.endereco?.cep??"",bairro:t.endereco?.bairro??""}}}onSubmit(t){console.log("submit ",t),this.doctorsService.updateById({id:this.idDoctor,nome:t.nome,telefone:t.telefone,endereco:{logradouro:t.logradouro,bairro:t.bairro,cidade:t.cidade,cep:t.cep,numero:t.numero,complemento:t.complemento,uf:t.uf}}).pipe((0,f.q)(1)).subscribe({next:()=>{this.message="Dados atualizados com sucesso",this.success=!0,setTimeout(()=>{this.location.back()},1e3)},error:()=>{this.message="Erro ao atualizar os dados",this.success=!1}})}onDeactivateButtonClicked(){this.doctorsService.getDoctorById(this.idDoctor).pipe((0,f.q)(1),(0,g.w)(e=>{const s={informationName:e.nome,informationText:this.doctorsService.formatTextModal(e)};return this.deactivateAccountPopupService.open(s)})).pipe((0,y.h)(e=>!0===e),(0,g.w)(e=>this.doctorsService.deactivateAccountById(this.idDoctor))).subscribe({next:e=>{this.router.navigate(["/doctors"])},error:e=>{console.log("Erro with the deactivation"),console.log(e),this.deactivateAccountPopupService.open()}})}}l.\u0275fac=function(t){return new(t||l)(o.Y36(r),o.Y36(d.F0),o.Y36(d.gz),o.Y36(a.Ye),o.Y36(M.I))},l.\u0275cmp=o.Xpm({type:l,selectors:[["app-edit-doctor"]],decls:3,vars:3,consts:[[1,"app-doctor-edit"],[3,"form-options","update","form-values-emitter","deactivate-account-emitter",4,"ngIf"],[3,"form-options","update","form-values-emitter","deactivate-account-emitter"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.YNc(1,j,1,2,"app-registration-form",1),o.ALo(2,"async"),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,e.doctor$)))},dependencies:[a.O5,O.Q,a.Ov]});class u{constructor(t,e){this.doctorsService=t,this.location=e,this.message="",this.success=!1}ngOnInit(){this.formOptions={type:"doctor"}}onSubmit(t){const e={nome:t.nome,telefone:t.telefone,crm:t.crm,email:t.email,especialidade:t.especialidade,endereco:{logradouro:t.logradouro,bairro:t.bairro,cidade:t.cidade,cep:t.cep,numero:t.numero,complemento:t.complemento,uf:t.uf}};console.log("submit ",e),this.doctorsService.newDoctor(e).pipe((0,f.q)(1)).subscribe({next:()=>{this.message="Dados salvos com sucesso",this.success=!0,setTimeout(()=>{this.location.back()},1e3)},error:()=>{this.message="Erro ao cadastrar os dados",this.success=!1}})}}u.\u0275fac=function(t){return new(t||u)(o.Y36(r),o.Y36(a.Ye))},u.\u0275cmp=o.Xpm({type:u,selectors:[["app-new-doctor"]],decls:2,vars:1,consts:[[1,"app-new-doctor"],[3,"form-options","form-values-emitter"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0)(1,"app-registration-form",1),o.NdJ("form-values-emitter",function(c){return e.onSubmit(c)}),o.qZA()()),2&t&&(o.xp6(1),o.Q6J("form-options",e.formOptions))},dependencies:[O.Q],styles:["[_nghost-%COMP%]{display:block}"]});const F=[{path:"",pathMatch:"full",component:m,title:"M\xe9dicos"},{path:"edit/:id",component:l,title:"Editar"},{path:"new",component:u,title:"Novo Perfil"}];class v{}v.\u0275fac=function(t){return new(t||v)},v.\u0275mod=o.oAB({type:v}),v.\u0275inj=o.cJS({imports:[d.Bz.forChild(F),d.Bz]});var Q=n(9549),L=n(4144),z=n(4385),R=n(4006),G=n(4466),H=n(3737),X=n(2095),K=n(1458),W=n(5106),k=n(4980);const q=[S.Cq,Q.lN,b.ot,L.c,z.LD],V=[a.ez,v,R.UX],tt=[W.k,G.m,K.x,k.v];class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=o.oAB({type:h}),h.\u0275inj=o.cJS({providers:[H.E,X.q],imports:[V,q,tt]})}}]);