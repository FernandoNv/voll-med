"use strict";(self.webpackChunkvoll_med=self.webpackChunkvoll_med||[]).push([[13],{4013:(q,P,i)=>{i.r(P),i.d(P,{PatientsModule:()=>v});var c=i(6895),r=i(2510),f=i(3900),g=i(5698),x=i(9300),t=i(4650),h=i(3258),C=i(8945),M=i(3609);function T(a,e){if(1&a){const n=t.EpF();t.TgZ(0,"app-registration-form",2),t.NdJ("form-values-emitter",function(s){t.CHM(n);const p=t.oxw();return t.KtG(p.onSubmit(s))})("deactivate-account-emitter",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.onDeactivateButtonClicked())}),t.qZA()}if(2&a){const n=e.ngIf,o=t.oxw();t.Q6J("form-options",o.buildFormOptions(n))("update",!0)}}class d{constructor(e,n,o,s,p){this.patientsService=e,this.router=n,this.ativatedRoute=o,this.location=s,this.deactivateAccountPopupService=p,this.patient$=this.ativatedRoute.paramMap.pipe((0,f.w)(k=>(this.idPatient=Number(k.get("id")),this.patientsService.getPatientById(this.idPatient))))}buildFormOptions(e){return{type:"patient",inputValues:{nome:e.nome,cpf:e.cpf,email:e.email,telefone:e.telefone??"",logradouro:e.endereco?.logradouro??"",numero:e.endereco?.numero??"",uf:e.endereco?.uf??"",complemento:e.endereco?.complemento??"",cidade:e.endereco?.cidade??"",cep:e.endereco?.cep??"",bairro:e.endereco?.bairro??""}}}onSubmit(e){console.log("submit ",e),this.patientsService.updateById({id:this.idPatient,nome:e.nome,telefone:e.telefone,endereco:{logradouro:e.logradouro,bairro:e.bairro,cidade:e.cidade,cep:e.cep,numero:e.numero,complemento:e.complemento,uf:e.uf}}).pipe((0,g.q)(1)).subscribe({next:()=>{this.message="Dados atualizados com sucesso",this.success=!0,setTimeout(()=>{this.location.back()},1e3)},error:()=>{this.message="Erro ao atualizar os dados",this.success=!1}})}onDeactivateButtonClicked(){this.patientsService.getPatientById(this.idPatient).pipe((0,g.q)(1),(0,f.w)(n=>{const o={informationName:n.nome,informationText:this.patientsService.formatTextModal(n)};return this.deactivateAccountPopupService.open(o)})).pipe((0,x.h)(n=>!0===n),(0,f.w)(n=>this.patientsService.deactivateAccountById(this.idPatient))).subscribe({next:n=>{this.router.navigate(["/patients"])},error:n=>{console.log("Erro with the deactivation"),console.log(n),this.deactivateAccountPopupService.open()}})}}d.\u0275fac=function(e){return new(e||d)(t.Y36(h.$),t.Y36(r.F0),t.Y36(r.gz),t.Y36(c.Ye),t.Y36(C.I))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-edit-patient"]],decls:3,vars:3,consts:[[1,"app-patient-edit"],[3,"form-options","update","form-values-emitter","deactivate-account-emitter",4,"ngIf"],[3,"form-options","update","form-values-emitter","deactivate-account-emitter"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,T,1,2,"app-registration-form",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.patient$)))},dependencies:[c.O5,M.Q,c.Ov]});class m{constructor(e,n){this.location=e,this.patientsService=n}ngOnInit(){this.formOptions={type:"patient"}}onSubmit(e){const n={nome:e.nome,telefone:e.telefone,email:e.email,cpf:e.cpf,endereco:{logradouro:e.logradouro,bairro:e.bairro,cidade:e.cidade,cep:e.cep,numero:e.numero,complemento:e.complemento,uf:e.uf}};console.log("submit ",n),this.patientsService.newPatient(n).pipe((0,g.q)(1)).subscribe({next:()=>{console.log("Dados salvos com sucesso"),setTimeout(()=>{this.location.back()},1e3)},error:o=>{console.log("Erro ao cadastrar os dados ",o)}})}}m.\u0275fac=function(e){return new(e||m)(t.Y36(c.Ye),t.Y36(h.$))},m.\u0275cmp=t.Xpm({type:m,selectors:[["app-new-patient"]],decls:2,vars:1,consts:[[1,"app-new-patient"],[3,"form-options","form-values-emitter"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"app-registration-form",1),t.NdJ("form-values-emitter",function(s){return n.onSubmit(s)}),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("form-options",n.formOptions))},dependencies:[M.Q]});var _=i(7579),I=i(2722),b=i(4004),O=i(8061),y=i(1572),S=i(4859),w=i(9267);function A(a,e){1&a&&(t.TgZ(0,"div",3),t._UZ(1,"mat-spinner",4),t.qZA())}function Z(a,e){if(1&a){const n=t.EpF();t.TgZ(0,"div")(1,"app-list-expansion-panel",9),t.NdJ("edit-button-clicked",function(s){t.CHM(n);const p=t.oxw(3);return t.KtG(p.onEditButtonClicked(s))})("deactivate-button-clicked",function(s){t.CHM(n);const p=t.oxw(3);return t.KtG(p.onDeactivateButtonClicked(s))}),t.qZA()()}if(2&a){const n=t.oxw().ngIf;t.xp6(1),t.Q6J("items",n)}}const Y=function(){return["/patients/new"]};function E(a,e){if(1&a&&(t.TgZ(0,"div"),t.YNc(1,Z,2,1,"div",6),t.TgZ(2,"div",7)(3,"button",8),t._uU(4," Cadastrar novo perfil "),t.qZA()()()),2&a){const n=e.ngIf;t.oxw();const o=t.MAs(4);t.xp6(1),t.Q6J("ngIf",n.length>0)("ngIfElse",o),t.xp6(2),t.Q6J("routerLink",t.DdM(3,Y))}}function $(a,e){1&a&&(t.TgZ(0,"div",10)(1,"p"),t._uU(2,"Sem pacientes cadastrados..."),t.qZA()())}function N(a,e){if(1&a&&(t.TgZ(0,"span"),t.YNc(1,E,5,4,"div",2),t.ALo(2,"async"),t.YNc(3,$,3,0,"ng-template",null,5,t.W1O),t.qZA()),2&a){const n=t.oxw();t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,n.items$))}}class l{constructor(e,n,o,s){this.patientsService=e,this.router=n,this.deactivateAccountPopupService=o,this.cpfPipe=s,this.destroySubject$=new _.x,this.patientsService.loading().pipe((0,I.R)(this.destroySubject$)).subscribe(p=>{this.isLoading=p})}ngOnInit(){this.setItems()}ngOnDestroy(){this.destroySubject$.next(!0),this.destroySubject$.complete()}setItems(){this.patients$=this.patientsService.getPatients(),this.items$=this.patients$.pipe((0,b.U)(e=>this.mapperToItems(e)))}mapperToItems(e){return e.map(o=>({id:o.id,title:o.nome,description:`${this.cpfPipe.transform(o.cpf)}`,content:[o.email]}))}onEditButtonClicked(e){this.router.navigate(["/patients/edit",e])}onDeactivateButtonClicked(e){this.patientsService.getPatientById(e).pipe((0,g.q)(1),(0,f.w)(o=>{o.cpf=this.cpfPipe.transform(o.cpf);const s={informationName:o.nome,informationText:this.patientsService.formatTextModal(o)};return this.deactivateAccountPopupService.open(s)})).pipe((0,x.h)(o=>!0===o),(0,f.w)(o=>this.patientsService.deactivateAccountById(e))).subscribe({next:o=>{this.setItems()},error:o=>{console.log("Erro with the deactivation"),console.log(o),this.deactivateAccountPopupService.open()}})}}l.\u0275fac=function(e){return new(e||l)(t.Y36(h.$),t.Y36(r.F0),t.Y36(C.I),t.Y36(O.Q))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-patients"]],decls:3,vars:2,consts:[[1,"app-patients"],["class","spinner-area",4,"ngIf"],[4,"ngIf"],[1,"spinner-area"],["diameter","40"],["noItems",""],[4,"ngIf","ngIfElse"],[1,"actions-area"],["mat-flat-button","",3,"routerLink"],[3,"items","edit-button-clicked","deactivate-button-clicked"],[1,"no-content-area"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,A,2,0,"div",1),t.YNc(2,N,5,3,"span",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.isLoading),t.xp6(1),t.Q6J("ngIf",!n.isLoading))},dependencies:[c.O5,r.rH,y.Ou,S.lW,w.e,c.Ov],styles:[".app-patients[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){.app-patients[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){.app-patients[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){.app-patients[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){.app-patients[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){.app-patients[_ngcontent-%COMP%]{max-width:1536px}}.app-patients[_ngcontent-%COMP%]{height:100%}.app-patients[_ngcontent-%COMP%]   .spinner-area[_ngcontent-%COMP%]{display:flex;height:100%;flex-direction:column;align-items:center;justify-content:center}.app-patients[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]{display:flex;height:auto;flex-direction:row;justify-content:center;padding-top:3rem;padding-bottom:1.5rem}.app-patients[_ngcontent-%COMP%]   .actions-area[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-bottom:.75rem;font-size:1rem;line-height:1.5rem;font-weight:700;padding:24px!important;background-color:#0b3b60!important;color:#fff}.app-patients[_ngcontent-%COMP%]   .no-content-area[_ngcontent-%COMP%]{padding:1rem;--tw-text-opacity: 1;color:rgb(71 85 105 / var(--tw-text-opacity))}"]});const B=[{path:"",pathMatch:"full",component:l,title:"Pacientes"},{path:"new",component:m,title:"Cadastrar"},{path:"edit/:id",component:d,title:"Editar"}];class u{}u.\u0275fac=function(e){return new(e||u)},u.\u0275mod=t.oAB({type:u}),u.\u0275inj=t.cJS({imports:[r.Bz.forChild(B),r.Bz]});var J=i(2095),Q=i(3737),F=i(5106),j=i(4466),D=i(1458),L=i(4980),z=i(4006),U=i(9549),H=i(4144),R=i(4385);const G=[y.Cq,U.lN,S.ot,H.c,R.LD],K=[c.ez,u,z.UX],X=[F.k,j.m,D.x,L.v],W=[Q.E,J.q,O.Q];class v{}v.\u0275fac=function(e){return new(e||v)},v.\u0275mod=t.oAB({type:v}),v.\u0275inj=t.cJS({providers:[...W],imports:[K,G,X]})}}]);